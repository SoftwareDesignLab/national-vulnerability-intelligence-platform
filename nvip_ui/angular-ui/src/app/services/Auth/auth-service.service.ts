import { Injectable } from '@angular/core';
import { ApiService } from '../Api/api-service.service';
import { CookieService } from '../Cookie/cookie.service';

/* Related Interfaces */

export interface AuthCredentials {
  userName: string;
  passwordHash: string;
}

export interface LoginResponse {}

@Injectable({
  providedIn: 'root'
})
export class AuthService {

  constructor(private api: ApiService, private cookieService: CookieService) { }

  onLogin(credentials: AuthCredentials) {
    this.api.login({userName: "demo", passwordHash: "demo"}, (res) => console.log(res))
  }

  isAuthenticated() {
    const cookie = this.cookieService.get("nvip_user");
    if (cookie == null) {
      return false;
    }

    // TODO: Do actually verification to make sure the cookie token is valid
    return cookie != undefined && cookie != null;
  };
}


